<!-- src/views/AboutView.vue -->
<template>
  <div v-if="isLoading" class="loader">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  <div v-else-if="error" class="error-message">{{ error }}</div>
  
  <div v-else class="about-page">
    <!-- 1. –≠—Ñ—Ñ–µ–∫—Ç–Ω–∞—è —à–∞–ø–∫–∞ (Hero) - —Å—Ç–∞—Ç–∏—á–Ω–∞—è, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –∑–∞–¥–∞–µ—Ç –æ–±—â–∏–π —Ç–æ–Ω —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    <section class="hero-section">
      <div class="hero-content">
        <h1>–ù–∞—à–∞ —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è. –í–∞—à–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.</h1>
        <p class="hero-subtitle">–ú—ã –≤–µ—Ä–∏–º, —á—Ç–æ –¥–µ—Ç–µ–π–ª–∏–Ω–≥ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —É—Å–ª—É–≥–∞, –∞ –∏—Å–∫—É—Å—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –ø—Ä–µ—É–º–Ω–æ–∂–µ–Ω–∏—è –∫—Ä–∞—Å–æ—Ç—ã –∞–≤—Ç–æ–º–æ–±–∏–ª—è.</p>
      </div>
    </section>

    <!-- 2. –ë–ª–æ–∫ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è (–¥–∞–Ω–Ω—ã–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏) -->
    <section class="page-section founder-section">
      <div class="section-content founder-grid">
        <div class="founder-photo">
          <img :src="founderPhotoUrl" :alt="content.founder_name || '–û—Å–Ω–æ–≤–∞—Ç–µ–ª—å —Å—Ç—É–¥–∏–∏'">
        </div>
        <div class="founder-text">
          <h2>–°–ª–æ–≤–æ –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è</h2>
          <p class="quote">"{{ content.founder_quote }}"</p>
          <div class="founder-signature">
            ‚Äî {{ content.founder_name }}
          </div>
        </div>
      </div>
    </section>

    <!-- 3. –ë–ª–æ–∫ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π (–¥–∞–Ω–Ω—ã–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏) -->
    <section class="page-section values-section">
      <div class="section-content">
        <h2 class="section-title">–¢—Ä–∏ –∫–∏—Ç–∞ –Ω–∞—à–µ–≥–æ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞</h2>
        <div class="values-grid">
          <div v-for="(value, index) in content.values" :key="index" class="value-card">
            <div class="value-icon">{{ value.icon || '‚ú®' }}</div>
            <h3>{{ value.title }}</h3>
            <p>{{ value.text }}</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 4. –ë–ª–æ–∫ —Å—Ç—É–¥–∏–∏ (–¥–∞–Ω–Ω—ã–µ –∏–∑ –∞–¥–º–∏–Ω–∫–∏) -->
    <section class="page-section studio-section">
      <div class="section-content">
        <h2 class="section-title">–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ —Ä–æ–∂–¥–∞–µ—Ç—Å—è —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ</h2>
        <p class="section-subtitle">–ù–∞—à–∞ —Å—Ç—É–¥–∏—è ‚Äî —ç—Ç–æ —á–∏—Å—Ç–æ–µ, —Å–≤–µ—Ç–ª–æ–µ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–µ–∑—É–ø—Ä–µ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>
        <img :src="studioPhotoUrl" alt="–ò–Ω—Ç–µ—Ä—å–µ—Ä –¥–µ—Ç–µ–π–ª–∏–Ω–≥ —Å—Ç—É–¥–∏–∏ AKB Detailing" class="studio-image">
      </div>
    </section>

     <!-- 5. –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é (—Å—Ç–∞—Ç–∏—á–Ω—ã–π) -->
    <section class="page-section cta-section">
       <div class="cta-block">
          <h2>–ì–æ—Ç–æ–≤—ã –¥–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–º —Å–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å?</h2>
          <p>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å—Ä–∞–∑—É –∑–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ —É—Å–ª—É–≥—É.</p>
          <RouterLink to="/booking" class="cta-button">
            –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω
          </RouterLink>
        </div>
    </section>

  </div>
</template>

<script setup>
import { ref, onMounted, computed } from 'vue';
import { RouterLink } from 'vue-router';
import axios from 'axios';

const API_URL = 'http://localhost:8000/api';
const SERVER_URL = 'http://localhost:8000';

const isLoading = ref(true);
const error = ref(null);

const content = ref({
  founder_photo_url: "",
  founder_quote: "",
  founder_name: "",
  values: [ 
    { icon: "üî¨", title: "", text: "" },
    { icon: "üèÜ", title: "", text: "" },
    { icon: "ü§ù", title: "", text: "" }
  ],
  studio_photo_url: ""
});

const founderPhotoUrl = computed(() => {
  return content.value.founder_photo_url ? `${SERVER_URL}${content.value.founder_photo_url}` : 'https://images.unsplash.com/photo-1568602471122-7832951cc4c5?q=80&w=2070';
});

const studioPhotoUrl = computed(() => {
  return content.value.studio_photo_url ? `${SERVER_URL}${content.value.studio_photo_url}` : 'https://images.unsplash.com/photo-1616422285623-13ff0162193c?q=80&w=2070';
});

onMounted(async () => {
  isLoading.value = true;
  try {
    const response = await axios.get(`${API_URL}/public/page/about-us/`);
    content.value = response.data;
  } catch (err) {
    error.value = "–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.";
    console.error(err);
  } finally {
    isLoading.value = false;
  }
});
</script>

<style scoped>
.about-page { color: #f0f0f0; }
.page-section { padding: 80px 20px; }
.section-content { max-width: 1200px; margin: 0 auto; }
.section-title { text-align: center; font-size: 2.5rem; margin-top: 0; margin-bottom: 1rem; }
.section-subtitle { text-align: center; font-size: 1.2rem; color: #aaa; max-width: 700px; margin: 0 auto 50px auto; }

.hero-section { background: linear-gradient(rgba(18, 18, 18, 0.7), rgba(18, 18, 18, 0.7)), url(https://www.zastavki.com/pictures/originals/2020Auto___Audi_Audi_RS_5_Coupe_car_rear_view_144313_.jpg) center center/cover; min-height: 50vh; display: flex; align-items: center; justify-content: center; text-align: center; padding: 4rem 2rem; }
.hero-content h1 { font-size: 3.5rem; margin: 0; }
.hero-subtitle { font-size: 1.3rem; color: #ddd; margin-top: 1rem; max-width: 600px; }

.founder-section { background-color: #1a1a1a; }
.founder-grid { display: grid; grid-template-columns: 1fr 2fr; gap: 50px; align-items: center; }
.founder-photo img { width: 100%; border-radius: 12px; aspect-ratio: 1 / 1; object-fit: cover; }
.founder-text h2 { font-size: 2.5rem; margin-top: 0; }
.founder-text p.quote { font-size: 1.2rem; color: #bbb; line-height: 1.8; font-style: italic; border-left: 3px solid #007BFF; padding-left: 1.5rem; }
.founder-signature { margin-top: 2rem; color: #007BFF; font-weight: bold; }

.values-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 50px; }
.value-card { background-color: #1e1e1e; border: 1px solid #333; padding: 2rem; border-radius: 12px; text-align: center; transition: transform 0.3s, box-shadow 0.3s; }
.value-card:hover { transform: translateY(-10px); box-shadow: 0 10px 20px rgba(0, 123, 255, 0.1); }
.value-icon { font-size: 3rem; margin-bottom: 1rem; }
.value-card h3 { font-size: 1.5rem; margin: 0 0 1rem 0; color: #fff; }
.value-card p { color: #aaa; font-size: 1rem; line-height: 1.6; margin: 0; }

.studio-section { background-color: #1a1a1a; }
.studio-image { width: 100%; border-radius: 12px; margin-top: 2rem; }

.cta-section { padding-bottom: 100px; }
.cta-block { max-width: 700px; margin: 0 auto; background: linear-gradient(45deg, #007bff, #0056b3); color: #fff; padding: 3rem; border-radius: 12px; text-align: center; }
.cta-block h2 { font-size: 2rem; margin: 0 0 1rem 0; }
.cta-block p { color: #e0e0e0; margin: 0 0 2rem 0; }
.cta-button { display: inline-block; background-color: #fff; color: #007BFF; padding: 14px 30px; border-radius: 30px; text-decoration: none; font-weight: 700; transition: all 0.3s ease; }
.cta-button:hover { background-color: #f0f0f0; transform: translateY(-3px); }

@media (max-width: 992px) {
  .founder-grid { grid-template-columns: 1fr; }
  .values-grid { grid-template-columns: 1fr; }
}
@media (max-width: 768px) {
  .hero-content h1 { font-size: 2.5rem; }
  .section-title, .founder-text h2 { font-size: 2rem; }
}
.loader, .error-message { text-align: center; padding: 50px 20px; font-size: 1.2rem; }
</style>